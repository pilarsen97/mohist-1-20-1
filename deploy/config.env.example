# =============================================================================
# Minecraft Server Deployment Configuration
# =============================================================================
# Copy this file to config.env and fill in the values
# NEVER commit config.env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Server Settings
# -----------------------------------------------------------------------------

# Server JAR filename (found in project root)
SERVER_JAR="mohist-1.20.1-2eb79df.jar"

# Server installation directory
# Production (Linux): /opt/minecraft
# Development (macOS): auto-detected from script location
SERVER_DIR="/opt/minecraft"

# Memory allocation
# Adjust based on your server's available RAM
MIN_RAM="2G"
MAX_RAM="8G"

# Server ports
GAME_PORT="25565"
QUERY_PORT="25565"

# -----------------------------------------------------------------------------
# RCON Settings (Remote Console)
# -----------------------------------------------------------------------------
# IMPORTANT: Change the password from the default!
# Must match rcon.password in server.properties

RCON_HOST="localhost"
RCON_PORT="25575"
RCON_PASSWORD=""  # <-- SET THIS! Get from server.properties line 43

# RCON timeout in seconds
RCON_TIMEOUT="5"

# -----------------------------------------------------------------------------
# Backup Settings
# -----------------------------------------------------------------------------

# Backup directory (relative to SERVER_DIR or absolute path)
BACKUP_DIR="${SERVER_DIR}/backups"

# Number of backups to keep (oldest are deleted first)
BACKUP_RETENTION="7"

# Compression level (1-9, higher = smaller but slower)
BACKUP_COMPRESSION="6"

# Worlds to backup (space-separated)
BACKUP_WORLDS="world world_nether world_the_end"

# Config files to backup (space-separated)
BACKUP_CONFIGS="server.properties bukkit.yml spigot.yml mohist-config/mohist.yml"

# -----------------------------------------------------------------------------
# Systemd Service Settings
# -----------------------------------------------------------------------------

# Service name (used for systemctl commands)
SERVICE_NAME="minecraft"

# User/Group for service (auto-detected from $SUDO_USER during install)
# These are set by install-service.sh, normally no need to change
# SERVICE_USER="your-username"
# SERVICE_GROUP="your-group"

# Restart behavior
RESTART_SEC="30"
RESTART_LIMIT_BURST="3"
RESTART_LIMIT_INTERVAL="300"

# -----------------------------------------------------------------------------
# Health Check Settings
# -----------------------------------------------------------------------------

# Time to wait for server to start (seconds)
STARTUP_TIMEOUT="120"

# Time between health check retries (seconds)
HEALTH_CHECK_INTERVAL="5"

# Maximum failed health checks before considering server unhealthy
HEALTH_CHECK_MAX_FAILURES="3"

# Port to check for server availability
HEALTH_CHECK_PORT="${GAME_PORT}"

# -----------------------------------------------------------------------------
# Prometheus Metrics Settings
# -----------------------------------------------------------------------------

# Enable Prometheus metrics endpoint
PROMETHEUS_ENABLED="true"

# Port for metrics endpoint
PROMETHEUS_PORT="9225"

# Metrics scrape interval (used in prometheus config)
PROMETHEUS_SCRAPE_INTERVAL="15s"

# -----------------------------------------------------------------------------
# Logging Settings
# -----------------------------------------------------------------------------

# Log directory (relative to SERVER_DIR or absolute path)
LOG_DIR="${SERVER_DIR}/logs/deploy"

# Log level: DEBUG, INFO, WARN, ERROR
LOG_LEVEL="INFO"

# Keep deploy logs for this many days
LOG_RETENTION_DAYS="30"

# -----------------------------------------------------------------------------
# Notification Settings (Optional)
# -----------------------------------------------------------------------------

# Webhook URL for Discord notifications (leave empty to disable)
DISCORD_WEBHOOK_URL=""

# Webhook URL for Telegram notifications (leave empty to disable)
TELEGRAM_BOT_TOKEN=""
TELEGRAM_CHAT_ID=""

# -----------------------------------------------------------------------------
# Git/Deployment Settings
# -----------------------------------------------------------------------------

# Branch to deploy from
GIT_BRANCH="main"

# Remote name
GIT_REMOTE="origin"

# Minimum JAR file size in bytes (to detect corrupted downloads)
MIN_JAR_SIZE="100000000"  # 100MB

# -----------------------------------------------------------------------------
# Development/Debug Settings
# -----------------------------------------------------------------------------

# Enable debug mode (verbose logging)
DEBUG_MODE="false"

# Dry run mode (don't actually execute dangerous commands)
DRY_RUN="false"

# Skip confirmation prompts
SKIP_CONFIRM="false"
